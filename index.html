<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Jeu de Roulette</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        text-align: center;
        margin: 50px;
      }
      #result {
        font-size: 1.5em;
        margin: 20px;
      }
      button {
        font-size: 1em;
        padding: 10px 20px;
        margin: 5px;
        cursor: pointer;
      }

      /* Bouton petit */
      .btn-small {
        font-size: 0.8em;
        padding: 5px 10px;
      }

      /* Bouton moyen (par défaut) */
      .btn-medium {
        font-size: 1em;
        padding: 10px 20px;
      }

      /* Bouton grand */
      .btn-large {
        font-size: 1.2em;
        padding: 15px 30px;
      }

      .play-roulette-container {
        display: none;
      }
    </style>
  </head>
  <body>
    <div class="main-menu">
      <button onclick="openMenu('play-roulette-container')">
        Jouer à la roulette
      </button>
      <button onclick="playRoulette()">Simulation Roulette</button>
    </div>

    <div class="play-roulette-container">
      <h1>Jeu de Roulette</h1>
      <div class="bankroll-container">
        <p>Banque actuelle: <span id="bankroll">2048</span>€</p>
        <input type="number" placeholder="Nouveau bankroll" id="newBankroll" />
        <button class="btn-small" onclick="changeBankroll(value)">
          Changer bankroll
        </button>
      </div>

      <label for="betType">Type de mise :</label>
      <select id="betType">
        <option value="red">Rouge</option>
        <option value="black">Noir</option>
        <option value="even">Pair</option>
        <option value="number">Numéro</option>
        <option value="odd">Impair</option>
      </select>

      <div id="numberInput" style="display: none">
        <label for="betNumber">Numéro (0-36) :</label>
        <input type="number" id="betNumber" min="0" max="36" />
      </div>

      <label for="betAmount">Montant de la mise :</label>
      <input type="number" id="betAmount" min="1" />

      <button onclick="playRoulette()">Lancer la roulette</button>

      <p id="result"></p>
    </div>

    <script>
      function openMenu(containerName) {
        let div = document.getElementsByClassName(containerName)[0];
        div.style.display = div.style.display === "none" ? "inline" : "none";
      }

      let bankroll = 2048;
      function changeBankroll() {
        let input = document.getElementById("newBankroll").value;
        document.getElementById("bankroll").textContent = input;
        bankroll = input;
      }

      const redNumbers = new Set([
        1, 3, 5, 7, 9, 12, 14, 16, 18, 19, 21, 23, 25, 27, 30, 32, 34, 36,
      ]);
      const blackNumbers = new Set([
        2, 4, 6, 8, 10, 11, 13, 15, 17, 20, 22, 24, 26, 28, 29, 31, 33, 35,
      ]);

      document
        .getElementById("betType")
        .addEventListener("change", function () {
          document.getElementById("numberInput").style.display =
            this.value === "number" ? "block" : "none";
        });

      function spinRoulette() {
        return Math.floor(Math.random() * 37);
      }

      function isWinningBet(betType, betNumber, result) {
        if (betType === "number" && betNumber == result) return 35;
        if (betType === "even" && result !== 0 && result % 2 === 0) return 1;
        if (betType === "odd" && result % 2 === 1) return 1;
        if (betType === "red" && redNumbers.has(result)) return 1;
        if (betType === "black" && blackNumbers.has(result)) return 1;
        return -1;
      }

      function playRoulette() {
        const betType = document.getElementById("betType").value;
        let betNumber =
          betType === "number"
            ? parseInt(document.getElementById("betNumber").value)
            : null;
        const betAmount = parseInt(document.getElementById("betAmount").value);

        if (isNaN(betAmount) || betAmount <= 0 || betAmount > bankroll) {
          alert("Montant de mise invalide");
          return;
        }

        const result = spinRoulette();
        const multiplier = isWinningBet(betType, betNumber, result);

        if (multiplier > 0) {
          const gain = betAmount * multiplier;
          bankroll += gain;
          document.getElementById(
            "result"
          ).textContent = `Résultat: ${result} - Gagné! +${gain}€`;
        } else {
          bankroll -= betAmount;
          document.getElementById(
            "result"
          ).textContent = `Résultat: ${result} - Perdu!`;
        }

        document.getElementById("bankroll").textContent = bankroll;

        if (bankroll <= 0) {
          alert("Vous avez perdu tout votre argent ! Fin de la partie.");
        }
      }
    </script>
  </body>
</html>
